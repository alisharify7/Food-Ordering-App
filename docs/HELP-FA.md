<div dir="rtl">

## راهنمای فارسی 


## ساخت محیط مجازی:
      
<div dir="ltr">

      Python3 -m venv venv
      or 
      python -m vevn venv
</div>


## فعال سازی محیط مجازی:
      
<div dir="ltr">

      source ./venv/bin/active
      or
      .\venv\Scripts\activate.bat
</div>

## نصب پکیج های پیش نیاز:
      
<div dir="ltr">

      pip install -r requirements.txt
</div>
      



## تنظیمات و پیکربندی:
- قبل از اجرای برنامه نیازه چندین تنظیم و تغییرات انجام بدید تا برنامه به درستی اجرا بشه
- ابتدا فایل کانفیگ خودتون رو بسازید (با دستور زیر) :
 
<div dir="ltr">

    cp .env.sample .env
</div>
- بعد فایل .env رو باز کنید و تنظیمات مورد نظر رو پر کنید (پر کردن تمام فیلد ها الزامی نیست و بعضی فیلد ها محتوای پیش فرض دارند)
- مواردی که حتما نیازه در فایل پر کنید عبارت اند از : تنظیمات دیتابیس, تنظیمات SECRET KEY, تنظیمات ردیس و دامنه

- بعد با دستور زیر تغییرات رو به دیتابیس migrate می کنیم:


 در این مرحله شما باید از قبل یه دیتابیس ساخته باشید 
 همینطور اسم دیتابیس رو داخل فایل کانفیگ گزاشته باشید 
- برای ساخت دیتابیس

<div dir="ltr">

    mysql -u <username> -p 
    <Enter Password>

    CREATE DATABASE <database Name>;
    exit

</div>

<div dir="ltr">

    # Migrate Changes to db

     flask db init
     flask db migrate
     flask db upgrade
</div>

- خب حالا که تنظیمات دیتابیس تموم شد نیازه تنظیمات پنل پیامکی هم انجام بدیم 
- این برنامه با پکیج پیامکی SMS.IR نوشته شده پس نیازه که داخل SMS.ir اکانت بسازید و API_KEY خودتون رو دریافت کنید و توی فایل .env قرار بدید
- با دستور زیر فایل کانفیگ پنل پیامکی رو درست کنید و بعد بازش کنید و فیلد های مورد نیازش رو پر کنید 
- در این جا نیازه با مفهوم قالب های پنل پیامکی آشنا باشید در غیراین صورت به مستندات رسمی اس ام اس دات ای ار برید و مطالعه اش کنید

<div dir="ltr">

    cp FoodyConfig/StaticConfig/SMS_IR_Config.py.sample FoodyConfig/StaticConfig/SMS_IR_Config.py
</div>


- بعد از ساخت فایل کانفیگ به مسیر FoodyConfig/StaticConfig/SMS_IR_Config.py برید و فیلد های مورد نظر رو پر کنید
- و شماره قالب خودتون رو در قسمت های مورد نظر درج کنید 
- برای تنظیم گروه های کاری (دسته ها) فایل  رو FoodyConfig/StaticConfig/Sections.py تغییر بدید به طور پیش فرض چندین گروه اولیه تعریف شده
- در انتها با دستور زیر تنظیماتی که اعمال کردید رو  در دیتابیس ذخیره کنید
- دستور زیر روز ها و بخش های مورد نظر رو در دیتابیس ذخیره می کنه


<div dir="ltr">        

    flask create init_setting  [--help]
</div>

- و برای ساخت اکانت ادمین هم دستور زیر رو وارد کنید

<div dir="ltr">

    flask create superuser [--help]
</div>

- و بعد با دستور زیر میتونید برنامه رو اجرا کنید  :
<div dir="ltr">

    flask run [--port int:portNumber] [--debug] [ --reload ] [-- with-threads OR --without-threads]
    or 
    python app.py

</div>

## ساخت حساب ادمین:
برای ساخت حساب کاربری ادمین به مسیر پایه پروژه برید و دستور زیر رو اجرا کنید :
      
<div dir="ltr">

    flask create superuser [--help]
</div>


## پنل مدیریت
برای دسترسی به پنل مدیریت نیاز به یه توکن هست که باید در انتهای ادرس پنل مدیریت وارد کنید تا صفحه ورود به شما نمایش داده بشه
این توکن در فایل کانفیگ ( file .env) وجود داره 

به طور پیش فرض مقدار توکن برابر با 123654 هست که اگر خواستید میتونید عوضش هم کنید برای این کار باید فایل .env رو باز کنید و مقدار ADMIN_LOGIN_TOKEN رو به هر چیزی که میخوایید تغییر بدید

### آدرس پنل مدیریت :

      
<div dir="ltr">

- www.domain.tld/auth/admin/login/<توکن>

- 127.0.0.1:8000/auth/admin/login/<توکن>
</div>

### توکن پیش فرض صفحه پنل مدیریت:
توکن پیش فرض:
123654 هست
پس آدرس ورود به صفحه ادمین مطابق زیره:
      
<div dir="ltr">
      
- www.domain.tld/auth/admin/login/123654
- 127.0.0.1:8000/auth/admin/login/123654
</div>

## تنظیمات وب سرور:
  برای تنظیمات وب سرور میتونید فایل liara_nginx.conf رو باز کنید 



## مستقر کردن در لیارا: 
این برنامه به طور پیش فرض تنظیم شده که در سرویس liara.ir مستقر بشه اگر شما از سرویس Pass دیگه ای استفاده می کنید حتما مطمین بشید که تنظیمات رو با سرویس ارایه دهنده اتون یکسان باشه تا باعث بروز مشکلات نشه

## دیسک لیارا:
این برنامه نیاز به دیسک (فضای ذخیره سازی ) هم داره 
برای ذخیره تصاویر غذا ها پس نیازه هنگام ساخت App توی لیارا یه دیسک هم برای این مورد بسازید 

سایز پیشنهادی: 1G

فراموش نکنید که اسم دیسکتون حتما باید Media  باشه



## دستورات CLI :

## create       
<div dir="ltr">

    flask create init_setting [--help]
</div>
این دستور رو در ایتدای راه اندازی نیازه اجرا کنید تا روز ها و بخش ها به دیتابیس اضافه بشه
      
<div dir="ltr">

    flask create superuser [--help]
</div>
از این دستور برای ساخت ادمین میتونید استفاده کنید

<div dir="ltr">

    flask create fakeuser [--help]
</div>
 با استفاده از این دستور میتونید کاربران فیک (تستی) برای برنامه بسازید


## status       
<div dir="ltr">

    flask status users [--help]
</div>
این دستور یه وضعیت از کل کاربران رو به شما نمایش میده  (تعداد کل, تعداد کاربرانی که حساب فعال دارند, ...)      
<div dir="ltr">

    flask status admins [--help]
</div>
این دستور یه وضعیت از کل ادمین ها رو به شما نمایش میده  (تعداد کل ادمین ها, تعداد ادمین هایی که حساب فعال دارند, ...)

<div dir="ltr">

    flask status orders [--help]
</div>
این دستور یه وضعیت از کل سفارشات سامانه بهتون نمایش میده (تعداد کل سفارشات, تعداد کل سفارشات امروز , ...)

</div>